/* Two-column chat layout based on the provided reference */

.chat-app {
  display: flex;
  height: calc(100vh - 80px);
  max-height: 100vh;
  background: var(--hover-color);
}

.chat-sidebar {
  width: 320px;
  min-width: 280px;
  border-right: 1px solid var(--border-color);
  background: var(--card-bg);
  display: flex;
  flex-direction: column;
}

.sidebar-header { padding: 16px; border-bottom: 1px solid var(--border-color); display:flex; align-items:center; justify-content: space-between; }
.sidebar-header h2 { margin: 0; font-size: 1.25rem; font-weight: 700; }
.sidebar-actions { display:flex; gap:8px; }

.sidebar-search { position: relative; padding: 12px 16px; border-bottom: 1px solid var(--border-color); }
.sidebar-search i { position:absolute; top: 50%; left: 28px; transform: translateY(-50%); color: var(--text-muted); }
.sidebar-search input {
  width: 100%; padding: 10px 12px 10px 36px; border-radius: 12px; border: 1px solid var(--border-color);
  background: var(--card-bg); color: var(--text-color);
}

.sidebar-list { overflow-y: auto; padding: 8px; }

.chat-contact { display:flex; align-items: center; gap: 10px; padding: 10px 8px; border-radius: 10px; cursor: pointer; transition: background .2s ease; }
.chat-contact:hover { background: var(--hover-color); }
.chat-contact.active { background: rgba(99,102,241,0.1); border: 1px solid rgba(99,102,241,0.25); }
.chat-contact.muted { opacity: 0.65; }

.chat-contact .avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--hover-color); display:flex; align-items:center; justify-content:center; color: var(--primary-color); }
.contact-main { flex: 1; min-width: 0; }
.contact-main .line-1 { display:flex; align-items:center; justify-content: space-between; }
.contact-main .name { font-weight: 600; display:flex; align-items:center; gap:6px; }
.new-dot { display:inline-block; width:8px; height:8px; background:#22c55e; border-radius:50%; }
.small-icon { font-size: 0.9rem; opacity: 0.8; margin-left: 4px; }
.contact-main .time { color: var(--text-muted); font-size: 12px; margin-left: 8px; }
.unread-badge { background: #0d6efd; color: #fff; border-radius: 9999px; min-width: 20px; height: 20px; padding: 0 6px; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; margin-left: 8px; }
.contact-main .line-2 { display:flex; align-items:center; justify-content: space-between; gap: 10px; }
.contact-main .preview { color: var(--text-muted); font-size: 13px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.contact-main .status { font-size: 11px; border: 1px solid var(--border-color); color: var(--text-muted); border-radius: 9999px; padding: 2px 8px; }
.contact-main .status.approved { border-color: rgba(16,185,129,.4); color: #059669; }
.contact-main .status.pending { border-color: rgba(251,191,36,.5); color: #b45309; }
.contact-main .status.rejected { border-color: rgba(239,68,68,.5); color: #dc2626; }

.contact-actions { display:none !important; }
.icon-btn { background: var(--hover-color); border: 1px solid var(--border-color); border-radius: 8px; width: 30px; height: 30px; display:flex; align-items:center; justify-content:center; color: var(--text-color); }
.icon-btn:hover { background: var(--border-color); }
.icon-btn.danger { color: #dc2626; border-color: rgba(239,68,68,.4); }

.chat-main { flex: 1; display:flex; flex-direction: column; min-width: 0; min-height: 0; overflow: hidden; }
/* Ensure embedded chat fills and stays within column */
.chat-main .modern-chat-container { width: 100% !important; max-width: 100% !important; margin: 0 !important; border-radius: 0 !important; box-shadow: none !important; height: 100% !important; min-height: 0 !important; }
.empty-main { margin: auto; color: var(--text-muted); border: 1px dashed var(--border-color); padding: 1.5rem; border-radius: 12px; background: var(--card-bg); }

/* Archived section styles */
.archived-header { display:flex; align-items:center; justify-content: space-between; padding: 8px 10px; margin: 4px 8px; border: 1px dashed var(--border-color); border-radius: 8px; color: var(--text-muted); cursor: pointer; }

@media (max-width: 900px) {
  .chat-app { flex-direction: column; height: auto; }
  .chat-sidebar { width: 100%; min-height: 280px; }
}

@media (max-width: 480px) {
  .sidebar-header h2 { font-size: 1.05rem; }
  .sidebar-search input { font-size: 0.95rem; }
  .contact-main .name { font-size: 0.95rem; }
  .contact-main .time { font-size: 10px; }
  .contact-main .preview { font-size: 12px; }
  .unread-badge { min-width: 18px; height: 18px; font-size: 11px; }
}
